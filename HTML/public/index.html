<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testi</title>
    <link rel="stylesheet" href="iStyle.css">
</head>
<body>
    <div class="div">    
        <h1>Tässä on tietoa pythonilla tekemästäni tasohyppelypelistä! (Ja muita koodaamiani juttuja.)</h1>
    </div>    
    <div class="div">    
        <p>Tässä on pelaajan ja vihollisen kuvat</p>
        <img src="pelaaja.png" alt="Kuvaa ei voitu ladata" style="width: 100px; height: auto;">
        <img src="vihollinen.png" alt="Kuvaa ei voitu ladata" style="width: 100px; height: auto;">
        <p>Tässä on pelin taustamusiikki</p>
        <audio src="musiikki.mp3" controls></audio>
        <p>Ja tässä on pelin taustakuva</p>
        <img src="tausta.png" alt="Kuvaa ei voitu ladata" style="width: 200px; height: auto;">
    </div>
    <div class="div">
        <a href="peli.html">
            <button>Mene pelaamaan!</button>
        </a>
        <br>
        <a href="3DGame.html">
            <button>Mene pelaamaan uutta JavaScript-Minecraft DEMOani!</button>
        </a>
        <p>Kun haluat lopettaa pelaamisen jostain syystä niin paina Q (Siis JS-Minecraftissa)</p>
    </div>
    <div class="div">
        <h2>Lataukset</h2>
        <p>Tästä voit ladata minun tekemäni Minecraftin!</p>
        <ul>
            <li><a href="/downloads/Minecraft.zip" download>Lataa peli (zip)</a></li>
        </ul>
        <p>Tästä voit ladata minun tekemäni kielimallin!</p>
        <ul>
            <li><a href="/downloads/SLM.zip" download>Lataa AI (zip)</a></li>
        </ul>
        <p>Tästä voit ladata myös uuden 2D pelini!</p>
        <ul>
            <li><a href="/downloads/PathFinder Maze 1.0.zip" download>Lataa Uusi 2D peli (zip)</a></li>
        </ul>
        <p>Tästä voit ladata myös uuden 3D pelini!</p>
        <ul>
            <li><a href="/downloads/3D Maze.zip" download>Lataa Uusi 3D peli (zip)</a></li>
        </ul>
    </div>  
    <p>Lisää tulossa..</p>

    <div class="div">
        <h2>Jätä kommentti!</h2>
        <form id="Kommentit">
            <input type="text" id="kommenttiInput" placeholder="Kommenttisi.." required>
            <button type="submit">Lähetä kommentti</button>
        </form>     

    <ul id="Kommenttilista"></ul>
    </div>    
    
    <script>
    const form = document.getElementById('Kommentit');
    const kentta = document.getElementById('kommenttiInput');
    const lista = document.getElementById('Kommenttilista');

    function haeKommentit() {
        fetch('/api/kommentit')
            .then(res => res.json())
            .then(data => {
                lista.innerHTML = '';
                data.forEach(k => {
                    const li = document.createElement('li');
                    li.textContent = k.teksti;
                    lista.appendChild(li);
                });
            });
    }

    form.addEventListener('submit', async function(e) {
        e.preventDefault();
        const teksti = kentta.value;
    
        if (teksti.trim() !== '') {
            const res = await fetch('/api/kommentit', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ teksti })
            });
    
            const data = await res.json();
            console.log("Vastaus serveriltä:", data);
    
            kentta.value = '';
            haeKommentit();
        }
    });

    haeKommentit();
    </script>    
</body>
</html>
